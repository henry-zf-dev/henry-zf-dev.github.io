<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  <meta name="description" content="Henry&#39;s blog">
  <meta name="keyword" content="hexo-theme, vuejs">
  
    <link rel="shortcut icon" href="/css/images/logo.png">
  
  <title>
    
      Vue æ ¸å¿ƒ API å­¦ä¹ ç¬”è®° | HenryV2è¿›é˜¶ä¸­â€¦
    
  </title>
  <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link href="//cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.css" rel="stylesheet">
  <link href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/tomorrow.min.css" rel="stylesheet">
  
<link rel="stylesheet" href="/css/style.css">

  
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/geopattern/1.2.3/js/geopattern.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.js"></script>
  
  
  
  
    <!-- MathJax support START -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <!-- MathJax support END -->
  


  
<meta name="generator" content="Hexo 4.2.0"></head>
<div class="wechat-share">
  <img src="/css/images/logo.png" />
</div>

  <body>
    <header class="header fixed-header">
  <div class="header-container">
    <a class="home-link" href="/">
      <div class="logo"></div>
      <span>HenryV2è¿›é˜¶ä¸­â€¦</span>
    </a>
    <ul class="right-list">
      
        <li class="list-item">
          
            <a href="/" class="item-link">é¦–é¡µ</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/tags/" class="item-link">æ ‡ç­¾</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/project/" class="item-link">é¡¹ç›®</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/archives/" class="item-link">å½’æ¡£</a>
          
        </li>
      
    </ul>
    <div class="menu">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </div>
    <div class="menu-mask">
      <ul class="menu-list">
        
          <li class="menu-item">
            
              <a href="/" class="menu-link">é¦–é¡µ</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/tags/" class="menu-link">æ ‡ç­¾</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/project/" class="menu-link">é¡¹ç›®</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/archives/" class="menu-link">å½’æ¡£</a>
            
          </li>
        
      </ul>
    </div>
  </div>
</header>

    <div id="article-banner">
  <h2>Vue æ ¸å¿ƒ API å­¦ä¹ ç¬”è®°</h2>
  <p class="post-date">2020-03-05</p>
  <div class="arrow-down">
    <a href="javascript:;"></a>
  </div>
</div>
<main class="app-body flex-box">
  <!-- Article START -->
  <article class="post-article">
    <section class="markdown-content"><p>Demo åœ°å€ï¼š<a href="https://github.com/henry-zf-dev/vue-webpack-ssr" target="_blank" rel="noopener">Vue è¿›é˜¶å­¦ä¹ </a></p>
<h4 id="1-Vue-å®ä¾‹"><a href="#1-Vue-å®ä¾‹" class="headerlink" title="1. Vue å®ä¾‹"></a>1. Vue å®ä¾‹</h4><p>å®ä¾‹ï¼šå¯¹æŸä¸ªç±»ï¼Œé€šè¿‡ new ClassA() åˆå§‹åŒ–è€Œæ¥çš„å¯¹è±¡ï¼Œå«åšå®ä¾‹ã€‚<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Object_initializer" target="_blank" rel="noopener">å¯¹è±¡åˆå§‹åŒ–å‚è€ƒ</a></p>
<p><a href="https://www.cnblogs.com/shirliey/p/11696412.html" target="_blank" rel="noopener">åˆå§‹åŒ–å¯¹è±¡çš„å‡ ç§æ–¹å¼</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#root'</span>,</span><br><span class="line">  template: <span class="string">'&lt;div&gt;This is content&lt;/div&gt;'</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡ new Vue(<code>options</code>) åˆå§‹åŒ–çš„ Vue å®ä¾‹ï¼Œæœ€ç»ˆä¼šé€šè¿‡ <code>render function</code> å°† template çš„å†…å®¹æŒ‚è½½åˆ° <code>#root</code> æ ¹èŠ‚ç‚¹ä¸Šï¼Œåœ¨é¡µé¢ä¸­å±•ç¤ºï¼Œè€Œä¸”æŒ‚è½½çš„æ–¹å¼æ˜¯ä½¿ç”¨ template render ç”Ÿæˆçš„æ–°èŠ‚ç‚¹ï¼Œæ›¿æ¢æ‰ æŒ‡å®šçš„ <code>#root</code> èŠ‚ç‚¹ï¼Œæ­£å¼è¿™ä¸ªåŸå› ï¼Œå¦‚æœåœ¨ template ä¸­å­˜åœ¨å¤šä¸ªæ ¹èŠ‚ç‚¹ï¼ŒVue ä¼šæŠ¥ä¸€ä¸ªè­¦å‘Šï¼š</p>
<p>æ³¨ï¼šå¦‚æœ options ä¼ å…¥äº† templateï¼Œåˆ™å°† template ç¼–è¯‘åˆ° render å‡½æ•°ä¸­å»ï¼Œå¦åˆ™ä¼šå°† el å¤–éƒ¨çš„ html ä½œä¸º template è¿›è¡Œç¼–è¯‘</p>
<blockquote>
<p>[Vue warn]: Error compiling template:<br>Component template should contain exactly one root element. If you are using v-if on multiple elements, use v-else-if to chain them instead.</p>
</blockquote>
<p>å› ä¸º Vue ä¸çŸ¥é“ç”¨å“ªä¸ªèŠ‚ç‚¹æ›¿æ¢æŒ‡å®šçš„æ ¹èŠ‚ç‚¹ã€‚</p>
<p>ä¸ä»…ä»…å¯ä»¥é€šè¿‡ <code>options.el</code> æŒ‡å®šè¦æŒ‚è½½çš„æ ¹èŠ‚ç‚¹ï¼Œè¿˜å¯ä»¥æ‰‹åŠ¨è¿›è¡ŒæŒ‚è½½ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.$mount(<span class="string">'#root'</span>);</span><br></pre></td></tr></table></figure>

<p>åœ¨ webpack é…ç½®ä¸­ï¼Œé€šè¿‡æ’ä»¶ï¼Œå¯ä»¥æŒ‡å®šä»¥æŸä¸ªæ–‡ä»¶ä¸ºæ¨¡æ¿ï¼Œç”Ÿæˆæœ€ç»ˆçš„ html é¡µé¢ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> HTMLPlugin(&#123;</span><br><span class="line">  template: path.join(__dirname, <span class="string">'index.html'</span>)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<hr>
<p>åˆå§‹åŒ– Vue ä¼ å…¥çš„ <code>options</code> ä¼šä¸é»˜è®¤çš„åˆå§‹åŒ–å‚æ•°ç»“åˆèµ·æ¥ï¼Œæœ€ç»ˆäº§ç”Ÿ Vue å®ä¾‹ï¼Œè€Œä¸” <code>options</code> ä¸­çš„å±æ€§å¯ä»¥é€šè¿‡ <code>app.$[attr]</code> è®¿é—®ï¼Œå¦‚ï¼š</p>
<p><code>app.$el</code>ã€<code>app.$root</code>ã€<code>app.$options</code>ã€<code>app.$data</code>ã€<code>app.$props</code>ã€<code>app.$children</code>ã€<code>app.$refs</code>ã€<code>app.$slots</code> ç­‰ç­‰</p>
<ul>
<li><p><code>app.$el</code> æ˜¯å¯¹æœ€ç»ˆæŒ‚è½½ç”Ÿæˆ html èŠ‚ç‚¹çš„å¼•ç”¨</p>
</li>
<li><p><code>app.$root</code> æ˜¯æ•´ä¸ª Vue æ ‘çŠ¶ç»“æ„çš„æ ¹èŠ‚ç‚¹ï¼Œä¹Ÿæ˜¯ Vue å®ä¾‹ï¼Œæ˜¯å¯¹ app çš„å¼•ç”¨ï¼Œå³ï¼š<code>app.$root === app</code></p>
</li>
<li><p><code>app.$options</code> æ˜¯åˆå§‹åŒ– Vue å®ä¾‹æ‰€æœ‰çš„å‚æ•°ï¼Œ$options ä¸­ä¹Ÿå¯ä»¥çœ‹åˆ°è¯¸å¦‚ <code>data</code>ã€<code>props</code>ã€<code>watch</code> ç­‰å±æ€§ï¼Œä½†ä¸æ˜¯å¯¹ <code>app.$[attr]</code> çš„å¼•ç”¨ï¼Œæ‰€ä»¥å¦‚æœæ›´æ”¹ <code>app.$options.data</code> çš„å€¼ï¼Œé¡µé¢æ˜¯ä¸ä¼šå“åº”å¼å˜åŒ–çš„ï¼Œç›´æ¥æ›´æ”¹ <code>app.$data</code> æ‰æœ‰æ•ˆ</p>
</li>
<li><p><code>app.$data</code></p>
<p>å®šä¹‰åœ¨ data å¯¹è±¡ä¸­çš„å±æ€§ï¼ŒVue ä¼šå¤åˆ¶ä¸€ä»½å¼•ç”¨åˆ° app å±‚ï¼Œå³ <code>app.[attr]</code> å’Œ <code>app.$data[attr]</code> è®¿é—®åˆ°çš„æ˜¯åŒä¸€ä»½åœ°å€ï¼Œ</p>
<p>å®šä¹‰åœ¨æ‰“ data ä¸­çš„å…¨å±€å±æ€§ï¼Œå¦‚æœä¸å¯¹å±æ€§è¿›è¡Œå­—é¢é‡å£°æ˜ï¼Œåˆ™åœ¨ Vue åˆå§‹åŒ–å®Œæˆä¹‹åï¼Œç»™ data å¯¹è±¡å¢åŠ å±æ€§ï¼Œæˆ–ä¿®æ”¹å±æ€§å€¼ï¼ŒVue ä¸ä¼šå¯¹è¿™ä¸ªå¯¹è±¡åšå“åº”å¼å¤„ç†ï¼Œæ‰€ä»¥å³ä½¿è¯¥å¯¹è±¡çš„å±æ€§å€¼å˜åŒ–äº†ï¼Œä¹Ÿä¸ä¼šå“åº”å¼åœ°é‡æ–°æ¸²æŸ“</p>
<p>ä½†å¯ä»¥é€šè¿‡ $set æ–¹æ³•ç»™åœ¨åˆå§‹åŒ–å®Œæˆä¹‹åå†ç»™ data å¢åŠ æˆ–ä¿®æ”¹å±æ€§ï¼Œè€Œä¸”ä¹Ÿæ˜¯å“åº”å¼çš„</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.$<span class="keyword">set</span>(app.obj, 'a', 'foo');</span><br></pre></td></tr></table></figure>
<p>å¦å¤–ï¼Œä¹Ÿåˆ é™¤æŸä¸ªå±æ€§ï¼ŒåŒæ—¶ä¼šè§£é™¤å¯¹è¯¥å±æ€§çš„å“åº”å¼å¤„ç†</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.$<span class="keyword">delete</span>(app.obj, <span class="string">'a'</span>);</span><br></pre></td></tr></table></figure>

<p><em>å¼ºåˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“ä¸€æ¬¡ï¼Œä¹Ÿå¯ä»¥åœ¨æ²¡æœ‰å­—é¢é‡å®šä¹‰ data å±æ€§æ—¶ï¼Œé¡µé¢é‡æ–°æ¸²æŸ“ï¼ˆå°½é‡ä¸ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼‰</em></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.$forceUpdate();</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>app.$refs</code> ç”¨äºå¿«é€Ÿå®šä½åˆ°æ¨¡æ¿çš„æŸä¸ª html èŠ‚ç‚¹ï¼Œæˆ–æŸä¸ªç»„ä»¶å®ä¾‹</p>
</li>
<li><p><code>app.$isServer</code> ç”¨äºæœåŠ¡ç«¯æ¸²æŸ“åˆ¤æ–­</p>
</li>
<li><p><code>app.$watch</code> </p>
<p>ä¸€ä¸‹å†™æ³•å’Œåœ¨ options ä¸­å®šä¹‰ watch éƒ½å¯ä»¥ç›‘å¬åˆ° foo çš„å˜åŒ–ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> unWatch = app.$watch(<span class="string">'foo'</span>, (newVal, oldVal) =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'newVal: '</span>, newVal);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'oldVal: '</span>, oldVal);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>åŒºåˆ«åœ¨äºï¼Œé€šè¿‡ app.$watch å®šä¹‰ï¼Œéœ€è¦æ‰‹åŠ¨è¿›è¡Œé”€æ¯ï¼ˆæ¯”å¦‚è·¯ç”±è·³è½¬åï¼‰ï¼Œè¯¥æ–¹æ³•å›è°ƒä¸€ä¸ª unWatch æ–¹æ³•ï¼Œç”¨äºæ‰‹åŠ¨å›æ”¶ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unWatch();</span><br></pre></td></tr></table></figure>

<p>è€Œå®šä¹‰åœ¨ options ä¸­ï¼ŒVue ä¼šè‡ªåŠ¨å›æ”¶é”€æ¯</p>
</li>
<li><p><code>app.$on</code> <code>app.$emit</code>  <code>app.$once</code></p>
<p><code>app.$on</code> å’Œ <code>app.$emit</code> éƒ½åªèƒ½åŒæ—¶ä½œç”¨äºä¸€ä¸ª Vue å¯¹è±¡ï¼Œæ‰ä¼šç”Ÿæ•ˆï¼ŒVue å¯¹è±¡ app ç›‘å¬äº† test äº‹ä»¶ï¼Œé‚£ä¹ˆå¿…é¡»ç”±å¯¹è±¡ app è‡ªå·±è§¦å‘äº‹ä»¶ testï¼Œæ‰ä¼šè¢«ç›‘å¬åˆ°ï¼Œè€Œä¸”ä¸ä¼šåƒ dom äº‹ä»¶ä¸€æ ·å†’æ³¡</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">app.$on(<span class="string">'test'</span>, (a, b) =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'$on test emitted: '</span>, a, b);</span><br><span class="line">&#125;);</span><br><span class="line">app.$emit(<span class="string">'test'</span>, <span class="number">1</span>, <span class="number">2</span>);</span><br></pre></td></tr></table></figure>
<p>app.$once åªä¼šè§¦å‘ä¸€æ¬¡</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line">   app.$once(<span class="string">'test'</span>, (a, b) =&gt; &#123;</span><br><span class="line">     <span class="built_in">console</span>.log(<span class="string">'$once test emitted'</span>, a, b);</span><br><span class="line">   &#125;)</span><br><span class="line"> <span class="string">``</span><span class="string">`    </span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">#### 2. Vue çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">![vue-lifecycle](vue-core-api/component-lifecycle.png)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">* `</span>beforeCreate<span class="string">` å’Œ `</span>created<span class="string">`</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> beforeCreateã€created æ–¹æ³•åœ¨ new Vue(`</span>options<span class="string">`) çš„è¿‡ç¨‹ä¸­ä¸€å®šä¼šè¢«æ‰§è¡Œï¼Œè€Œä¸” beforeCreateã€created ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸä¸­éƒ½ä¸èƒ½è¿›è¡Œ dom æ“ä½œï¼Œå› ä¸ºè¿™æ—¶ Vue è¿˜æ²¡æœ‰ç”Ÿæˆæœ€ç»ˆçš„æ ¹èŠ‚ç‚¹ï¼Œä¸€èˆ¬æ“ä½œ dom ç›¸å…³çš„åŠ¨ä½œï¼Œè¦æ”¾åœ¨ mounted ä¸­ã€‚æ“ä½œæ•°æ®ç›¸å…³çš„åŠ¨ä½œä¸€èˆ¬æ”¾åœ¨ created ä¸­ï¼Œä½†ä¸è¦æ”¾åœ¨ beforeCreate ä¸­ï¼Œå› ä¸º beforeCreate è¿˜æ²¡æœ‰è¿›è¡Œæ•°æ®çš„ reactive å“åº”å¼ç›¸å…³çš„åˆå§‹åŒ–</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">* `</span>beforeMount<span class="string">` å’Œ `</span>mounted<span class="string">`</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> mounted ä¹‹åä¼šæŠŠå½“å‰ Vue ç”Ÿæˆçš„ html æŒ‚è½½åˆ° dom ä¸Šï¼Œå³ï¼šæŠŠç”Ÿæˆçš„ html æŠŠ `</span>&lt;div id=<span class="string">"root"</span>&gt;&lt;<span class="regexp">/div&gt;` æ›¿æ¢æ‰ã€‚å¦‚æœåœ¨ options ä¸­ä¸æŒ‡å®š elï¼Œåˆ™ä¸ä¼šæ‰§è¡Œ beforeMountã€mountedã€‚åœ¨ mounted ä¹‹åï¼Œæ‰€æœ‰ç”Ÿå‘½å‘¨æœŸä¸­æ‹¿åˆ°çš„æ ¹èŠ‚ç‚¹ï¼Œéƒ½æ˜¯ mounted ä¹‹åäº§ç”Ÿçš„èŠ‚ç‚¹</span></span><br><span class="line"><span class="regexp"> </span></span><br><span class="line"><span class="regexp">beforeCreateã€createdã€beforeMountã€mounted åœ¨æ•´ä¸ªç»„ä»¶ç”Ÿå‘½å‘¨æœŸä¸­åªä¼šè¢«è°ƒç”¨ä¸€æ¬¡ï¼Œè€Œä¸” beforeMountã€mounted åœ¨æœåŠ¡ç«¯æ¸²æŸ“ä¸­ä¸ä¼šè¢«è°ƒç”¨ï¼Œå› ä¸ºè¿™ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸéƒ½å’Œæ“ä½œ dom æœ‰å…³</span></span><br><span class="line"><span class="regexp"> </span></span><br><span class="line"><span class="regexp">* `beforeUpdate` å’Œ `updated`</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp"> åªè¦å“åº”å¼å¤„ç†è¿‡çš„æ•°æ®æœ‰å˜åŒ–ï¼Œé¡µé¢å°±ä¼šå“åº”é‡æ–°æ¸²æŸ“ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•ä¹Ÿéƒ½ä¼šè¢«é‡å¤è°ƒç”¨</span></span><br><span class="line"><span class="regexp"> </span></span><br><span class="line"><span class="regexp">* `activated` å’Œ `deactivated`</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp"> ä¸ç»„ä»¶çš„ keep-alive ç›¸å…³</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">* `beforeDestroy` å’Œ `destroyed`</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp"> beforeDestroy ä¸­ä¼šè§£é™¤æ‰€æœ‰äº‹ä»¶ç›‘å¬ä»¥åŠæ‰€æœ‰çš„ watch ç›‘å¬</span></span><br><span class="line"><span class="regexp"> </span></span><br><span class="line"><span class="regexp">* `render`</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp"> render æ–¹æ³•ç¬¬ä¸€æ¬¡å°†åœ¨ beforeMount å’Œ mounted ä¹‹é—´æ‰§è¡Œï¼Œä¹‹åéƒ½å°†åœ¨ beforeUpdate å’Œ updated ä¹‹é—´æ‰§è¡Œ</span></span><br><span class="line"><span class="regexp"> </span></span><br><span class="line"><span class="regexp">* `renderError`</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp"> åªæœ‰åœ¨å¼€å‘ç¯å¢ƒæ‰ä¼šè§¦å‘ï¼Œå¹¶ä¸”åªèƒ½ç”¨äºå½“å‰ç»„ä»¶ï¼Œå®ƒçš„å­ç»„ä»¶çš„é”™è¯¯æ— æ³•æ•è·åˆ°</span></span><br><span class="line"><span class="regexp"> </span></span><br><span class="line"><span class="regexp">* `errorCaptured`</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp"> ä¸ç®¡æ˜¯å¼€å‘ç¯å¢ƒè¿˜æ˜¯æ­£å¼ç¯å¢ƒï¼Œåªè¦æ•è·åˆ°å½“å‰ç»„ä»¶ï¼Œæˆ–è€…å®ƒçš„å­ç»„ä»¶æ¸²æŸ“å‘ç”Ÿé”™è¯¯æ—¶ï¼Œéƒ½ä¼šè§¦å‘ï¼Œé™¤éå­ç»„ä»¶é˜»æ­¢äº†äº‹ä»¶å†’æ³¡</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">#### 3. Vue çš„æ•°æ®ç»‘å®š</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">```javascript</span></span><br><span class="line"><span class="regexp">import Vue from 'vue';</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">var globalVar = '111'; /</span><span class="regexp">/ eslint-disable-line</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">new Vue(&#123;</span></span><br><span class="line"><span class="regexp">  el: '#root',</span></span><br><span class="line"><span class="regexp">  template: `</span></span><br><span class="line"><span class="regexp">    &lt;div :id="id" :class="activeClass" @click="handleClick"&gt;</span></span><br><span class="line"><span class="regexp">      &lt;div :class="&#123;active: isActive&#125;"&gt;</span></span><br><span class="line"><span class="regexp">        æ¨¡æ¿ä¸­åªèƒ½åšç”¨ä¸€è¡Œè¯­å¥å°±èƒ½æœ‰ç»“æœçš„è¡¨è¾¾å¼</span></span><br><span class="line"><span class="regexp">        &#123;&#123;isActive ? "active" : "not active"&#125;&#125;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">      &lt;div :<span class="class"><span class="keyword">class</span></span>=<span class="string">"[&#123;active: isActive&#125;, inactiveClass]"</span>&gt;</span><br><span class="line">        æ¨¡æ¿ä¸­å¯ä»¥è®¿é—® Vue é»˜è®¤çš„å…¨å±€å˜é‡ç™½åå•ï¼Œä½†è‡ªå·±å®šä¹‰çš„å…¨å±€å˜é‡ä¸èƒ½è®¿é—®ï¼ˆå¦‚ globalVarï¼‰</span><br><span class="line">        &#123;&#123;<span class="built_in">Date</span>.now()&#125;&#125;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">      &lt;div :style="[activeStyle, inactiveStyle]"&gt;</span></span><br><span class="line"><span class="regexp">        å¯¹ data ä¸­å®šä¹‰çš„ HTMLï¼ŒVue ä¼šè‡ªåŠ¨è¿›è¡Œè½¬ç§»æˆçº¯çš„å­—ç¬¦ä¸²ï¼Œä¸ºäº†é˜²æ­¢æ³¨å…¥æ”»å‡»</span></span><br><span class="line"><span class="regexp">        è¦ä»¥ v-html æ–¹å¼ä½¿ç”¨</span></span><br><span class="line"><span class="regexp">        &lt;div v-html="html"&gt;&lt;/</span>div&gt;</span><br><span class="line">        &lt;div&gt;&#123;&#123;getJoinedArr(arr)&#125;&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  `,</span></span><br><span class="line"><span class="regexp">  data: &#123;</span></span><br><span class="line"><span class="regexp">    id: 'aaa',</span></span><br><span class="line"><span class="regexp">    activeClass: 'active',</span></span><br><span class="line"><span class="regexp">    inactiveClass: 'inactive',</span></span><br><span class="line"><span class="regexp">    activeStyle: &#123;</span></span><br><span class="line"><span class="regexp">      color: 'red',</span></span><br><span class="line"><span class="regexp">      /</span><span class="regexp">/ Vue ä¼šç»™éœ€è¦åŠ å‰ç¼€çš„æ ·å¼å±æ€§åè‡ªåŠ¨åŠ ä¸Šå‰ç¼€</span></span><br><span class="line"><span class="regexp">      /</span><span class="regexp">/ è¯¥å±æ€§ç”¨äºæ¶ˆé™¤æµè§ˆé»˜è®¤æ ·å¼</span></span><br><span class="line"><span class="regexp">      appearance: 'none'</span></span><br><span class="line"><span class="regexp">    &#125;,</span></span><br><span class="line"><span class="regexp">    inactiveStyle: &#123;</span></span><br><span class="line"><span class="regexp">      /</span><span class="regexp">/ html ä¸­æ‰€å†™æ ·å¼çš„ '-' åˆ†éš”ç¬¦æ ¼å¼è½¬åŒ–æˆé©¼å³°æ ¼å¼</span></span><br><span class="line"><span class="regexp">      fontSize: '15px'</span></span><br><span class="line"><span class="regexp">    &#125;,</span></span><br><span class="line"><span class="regexp">    isActive: true,</span></span><br><span class="line"><span class="regexp">    arr: [1, 2, 3],</span></span><br><span class="line"><span class="regexp">    html: '&lt;span&gt;123&lt;/</span>span&gt;<span class="string">'</span></span><br><span class="line"><span class="string">  &#125;,</span></span><br><span class="line"><span class="string">  methods: &#123;</span></span><br><span class="line"><span class="string">    handleClick () &#123;</span></span><br><span class="line">      console.log('##### handleClick #####');</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// å»ºè®®è¿™ç§æƒ…å†µä½¿ç”¨ computedï¼Œ</span></span><br><span class="line">    <span class="comment">// å› ä¸º computed ä¼šå…ˆåˆ¤æ–­æ•°æ®æºæ˜¯å¦æœ‰å˜åŒ–ï¼Œå†æ¥æ¸²æŸ“é¡µé¢ï¼Œæ•ˆç‡ä¼šæ›´é«˜</span></span><br><span class="line">    getJoinedArr (arr = []) &#123;</span><br><span class="line">      <span class="keyword">return</span> arr.join(<span class="string">'ã€'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h4 id="4-computed-å’Œ-watch"><a href="#4-computed-å’Œ-watch" class="headerlink" title="4. computed å’Œ watch"></a>4. computed å’Œ watch</h4><ul>
<li><p><strong>computed:</strong></p>
<p>å®šä¹‰åœ¨ <code>computed</code> ä¸­çš„æ–¹æ³•ï¼Œå¯ä»¥åƒè®¿é—®å˜é‡çš„å±æ€§ä¸€æ ·å»è°ƒç”¨ï¼Œè¿™æ˜¯å› ä¸º Vue ä¼šå¯¹ fullName å£°æ˜ <code>get</code> å’Œ <code>set</code> æ–¹æ³•ï¼Œå¹¶ä¸”ä¼šå¯¹è®¡ç®—çš„ç»“æœåšç¼“å­˜ï¼Œåªæœ‰å½“ <code>computed</code> ä¸­æ‰€ä¾èµ–çš„å“åº”å¼å˜é‡ï¼ˆå³ï¼šfirstName æˆ– lastNameï¼‰å‘ç”Ÿå˜åŒ–ï¼Œæ‰ä¼šé‡æ–°è®¡ç®—ã€‚è€Œå¦‚æœæ˜¯åœ¨ <code>methods</code> ä¸­åšåŒæ ·çš„é€»è¾‘è®¡ç®—ï¼Œé‚£ä¹ˆåªè¦ <code>data</code> æˆ–è€… <code>props</code> ä¸­ä»»ä½•ä¸€ä¸ªå±æ€§æœ‰å˜åŒ–ï¼Œéƒ½ä¼šé‡æ–°æ¸²æŸ“é¡µé¢ï¼Œä»è€Œé‡æ–°è°ƒç”¨ <code>methods</code> ä¸­çš„æ–¹æ³•ã€‚æ‰€æœ‰å®šä¹‰åœ¨ <code>computed</code> ä¸­æ€§èƒ½æ¶ˆè€—ä¼šæ›´å°ï¼Œç‰¹åˆ«æ˜¯è®¡ç®—çš„é€»è¾‘å¾ˆå¤æ‚çš„æƒ…å†µ</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> computed = &#123;</span><br><span class="line">   fullName () &#123;</span><br><span class="line">     <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;<span class="keyword">this</span>.firstName&#125;</span> <span class="subst">$&#123;<span class="keyword">this</span>.lastName&#125;</span>`</span>;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<hr>
<p>ä¹Ÿå¯ä»¥é€šè¿‡æ˜¾ç¤ºåœ°å®šä¹‰ <code>get</code> å’Œ <code>set</code> æ–¹æ³•æ¥å®šä¹‰ <code>computed</code></p>
<p><code>get:</code> è·å– fullName çš„å€¼æ—¶ä¼šåšå“ªäº›è®¡ç®—<br><code>set:</code> ç»™ fullName èµ‹å€¼æ—¶ä¼šåšå“ªäº›è®¡ç®—ã€‚ä¸å»ºè®®ä½¿ç”¨ setï¼Œå› ä¸ºå°†å¤šä¸ªå€¼é€šè¿‡è®¡ç®—ç»„è£…æˆä¸€ä¸ªå€¼å¾ˆç®€å•ï¼Œä½†æŠŠä¸€ä¸ªå€¼æ‹†è§£æˆå¤šä¸ªå€¼æ˜¯å¾ˆéº»çƒ¦çš„ï¼Œè€Œä¸”å¾ˆå®¹æ˜“å‡ºé—®é¢˜ï¼Œé€ æˆæ­»å¾ªç¯</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> computed = &#123;</span><br><span class="line">   fullName: &#123;</span><br><span class="line">     <span class="keyword">get</span> () &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;<span class="keyword">this</span>.firstName&#125;</span> <span class="subst">$&#123;<span class="keyword">this</span>.lastName&#125;</span>`</span>;</span><br><span class="line">     &#125;,</span><br><span class="line">     <span class="keyword">set</span> (val) &#123;</span><br><span class="line">       <span class="keyword">const</span> names = val.split(<span class="string">' '</span>);</span><br><span class="line">       <span class="keyword">this</span>.firstName = names[<span class="number">0</span>];</span><br><span class="line">       <span class="keyword">this</span>.lastName = names[<span class="number">1</span>];</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>watch:</strong></p>
<p><code>watch</code> ä¸­å¯ä»¥å¯¹ <code>data</code> <code>props</code> <code>computed</code> ä¸­çš„å“åº”å¼å˜é‡è¿›è¡Œç›‘å¬ï¼Œåªè¦å…¶å‘ç”Ÿå˜åŒ–ï¼Œå°±æ‰§è¡Œä¸€äº›é€»è¾‘å¤„ç†</p>
<p>åªæœ‰å½“ data.age å‘ç”Ÿå˜åŒ–æ‰ä¼šæ‰§è¡Œ age æ–¹æ³•ä¸­çš„é€»è¾‘</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> watch = &#123;</span><br><span class="line">   age (newVal, oldVal) &#123;</span><br><span class="line">     <span class="keyword">this</span>.notYoung = newVal &gt;= <span class="number">30</span>;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<p>ä¹Ÿå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å®šä¹‰ <code>watch</code>ï¼š</p>
<p><code>immediate</code>ï¼šè¡¨ç¤ºæ˜¯å¦ç«‹å³æ‰§è¡Œ</p>
<p>ä½œç”¨ï¼šå¦‚æœ age çš„åˆå§‹å€¼æœ¬èº«å·²ç»å¤§äº 30ï¼Œé‚£ä¹ˆæŒ‰ç…§ä¸Šé¢ğŸ‘†çš„å½¢å¼å®šä¹‰ <code>watch</code>ï¼Œç¬¬ä¸€æ¬¡ handler æ–¹æ³•æ˜¯ä¸ä¼šæ‰§è¡Œçš„ï¼Œåªæœ‰å½“ age å†æ¬¡å‘ç”Ÿå˜åŒ–æ‰ä¼šæ‰§è¡Œï¼Œè€Œ <code>immediate</code> å°±æ˜¯ç”¨æ¥è§£å†³è¿™ä¸ªé—®é¢˜çš„</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> watch = &#123;</span><br><span class="line">   age: &#123;</span><br><span class="line">     handler (newVal, oldVal) &#123;</span><br><span class="line">       <span class="keyword">this</span>.notYoung = newVal &gt;= <span class="number">30</span>;</span><br><span class="line">     &#125;,</span><br><span class="line">     immediate: <span class="literal">true</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><code>deep</code>ï¼šæ·±åº¦è§‚å¯Ÿ</p>
<p>ä½œç”¨ï¼šå¦‚æœ other æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆåªæ˜¯ä¿®æ”¹ other ä¸­å±æ€§çš„å€¼ï¼Œè€Œä¸æ˜¯ç›´æ¥ç»™ other é‡æ–°èµ‹å€¼ï¼Œé‚£ä¹ˆæŒ‰ç…§ä¸Šé¢ğŸ‘†çš„å½¢å¼å®šä¹‰ <code>watch</code>ï¼Œhandle æ–¹æ³•ä¹Ÿæ˜¯ä¸ä¼šæ‰§è¡Œçš„ã€‚ä½†å¦‚æœè®¾ç½® <code>deep: true</code>ï¼Œé‚£ä¹ˆ other ä¸ç®¡å“ªä¸ªå±æ€§å˜åŒ–ï¼Œhandle æ–¹æ³•éƒ½ä¼šæ‰§è¡Œ</p>
<p>åŸç†ï¼šVue ä¼šé€å±‚éå† other æ‰€æœ‰çš„å±æ€§ï¼Œå¹¶ä¸ºæ¯ä¸ªå±æ€§å¢åŠ ä¸€ä¸ªå“åº”å¼ç›‘å¬ï¼Œæ‰€æœ‰åªè¦ other ä»»ä½•å±‚çº§çš„ä»»ä½•å±æ€§å‘ç”Ÿå˜åŒ–ï¼Œéƒ½ä¼šæ‰§è¡Œ handle æ–¹æ³•</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> watch = &#123;</span><br><span class="line">   other: &#123;</span><br><span class="line">     handler (newVal, oldVal) &#123;</span><br><span class="line">       <span class="built_in">console</span>.log(<span class="string">'other changed'</span>);</span><br><span class="line">     &#125;,</span><br><span class="line">     deep: <span class="literal">true</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>ä½†è¿™ç§å†™æ³•å¯¹æ€§èƒ½å¼€é”€è¾ƒå¤§ï¼Œå»ºè®®ä½¿ç”¨ä»¥ä¸‹ğŸ‘‡å†™æ³•</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> watch = &#123;</span><br><span class="line">   <span class="string">'other.hobby'</span> () &#123;</span><br><span class="line">     <span class="built_in">console</span>.log(<span class="string">'other.hobby changed'</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h4 id="5-Vue-çš„åŸç”ŸæŒ‡ä»¤"><a href="#5-Vue-çš„åŸç”ŸæŒ‡ä»¤" class="headerlink" title="5. Vue çš„åŸç”ŸæŒ‡ä»¤"></a>5. Vue çš„åŸç”ŸæŒ‡ä»¤</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#root'</span>,</span><br><span class="line">  template: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div&gt;</span></span><br><span class="line"><span class="string">      &lt;div&gt;&#123;&#123;text&#125;&#125;&lt;/div&gt;</span></span><br><span class="line"><span class="string">      &lt;div v-text="text"&gt;aaa&lt;/div&gt;</span></span><br><span class="line"><span class="string">      &lt;div v-html="html"&gt;aaa&lt;/div&gt;</span></span><br><span class="line"><span class="string">      &lt;div&gt;ç±»ä¼¼äº dom çš„ innerText å’Œ innerHtml&lt;/div&gt;</span></span><br><span class="line"><span class="string">      &lt;br/&gt;</span></span><br><span class="line"><span class="string">      &lt;div v-pre&gt;å°†å†…å®¹å½“åšçº¯æ–‡æœ¬æ˜¾ç¤º: &#123;&#123;text&#125;&#125;&lt;/div&gt;</span></span><br><span class="line"><span class="string">      &lt;br/&gt;</span></span><br><span class="line"><span class="string">      &lt;div v-once="text"&gt;</span></span><br><span class="line"><span class="string">        &lt;div&gt;æ•°æ®ç»‘å®šçš„å†…å®¹åªæ‰§è¡Œä¸€æ¬¡ï¼Œä¹‹åæ•°æ®å˜åŒ–åä¹Ÿä¸ä¼šéšä¹‹å˜åŒ–ï¼Œ&lt;/div&gt;</span></span><br><span class="line"><span class="string">        &lt;div&gt;ç”¨å¤„ï¼šå±•ç¤ºé™æ€å†…å®¹æ—¶ï¼Œé€šè¿‡å£°æ˜ v-once å‡å°‘æ€§èƒ½å¼€é”€ï¼Œ&lt;/div&gt;</span></span><br><span class="line"><span class="string">        &lt;div&gt;v-once ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹ï¼ŒVue éƒ½ä¸ä¼šå°†å…¶å’Œè™šæ‹Ÿ dom è¿›è¡Œæ£€æµ‹å¯¹æ¯”ï¼Œä»è€Œå‡å°‘é‡æ–°æ¸²æŸ“çš„å¼€é”€ã€‚&lt;/div&gt;</span></span><br><span class="line"><span class="string">      &lt;/div&gt;</span></span><br><span class="line"><span class="string">      &lt;br/&gt;</span></span><br><span class="line"><span class="string">      &lt;div v-show="active"&gt;æ ¹æ® show çš„å€¼ï¼Œç»™ div å¢åŠ  display çš„æ ·å¼&lt;/div&gt;</span></span><br><span class="line"><span class="string">      &lt;div v-if="active"&gt;æ ¹æ® show çš„å€¼ï¼Œå†³å®šæ˜¯å¦æŠŠ div æ·»åŠ åˆ° dom æµä¸­&lt;/div&gt;</span></span><br><span class="line"><span class="string">      &lt;div v-else&gt;else content&lt;/div&gt;</span></span><br><span class="line"><span class="string">      &lt;div&gt;å¦‚æœåªæ˜¯å•çº¯æƒ³æ§åˆ¶å…ƒç´ çš„æ˜¾ç¤ºå’Œéšè—ï¼Œé‚£ä¹ˆæœ€å¥½ä½¿ç”¨ v-showï¼Œ&lt;/div&gt;</span></span><br><span class="line"><span class="string">      &lt;div&gt;å› ä¸º v-if ä¼šå¯¹ dom èŠ‚ç‚¹è¿›è¡Œå¢åˆ æ“ä½œï¼Œå¯¼è‡´é‡ç»˜å’Œé‡æ–°æ’ç‰ˆï¼Œæœ‰æ€§èƒ½çš„å½±å“ã€‚&lt;/div&gt;</span></span><br><span class="line"><span class="string">      &lt;br/&gt;</span></span><br><span class="line"><span class="string">      &lt;div&gt;v-for ä¸­çš„ key æ˜¯ç”¨æ¥åšæ•°æ®ç¼“å­˜çš„ï¼Œéœ€è¦ä¿è¯å”¯ä¸€ï¼Œ&lt;/div&gt;</span></span><br><span class="line"><span class="string">      &lt;div&gt;å½“æ•°æ®æºå‘ç”Ÿå˜åŒ–æ—¶ï¼ŒVue ä¼šæ ¹æ®æ¯ä¸ª item çš„ key åœ¨ç¼“å­˜ä¸­å¯»æ‰¾ï¼Œæ˜¯å¦å·²ç»å­˜åœ¨ keyï¼Œ&lt;/div&gt;</span></span><br><span class="line"><span class="string">      &lt;div&gt;å¦‚æœå·²ç»å­˜åœ¨ï¼Œåˆ™ç›´æ¥åœ¨ç¼“å­˜ä¸­å¤ç”¨ item çš„ dom èŠ‚ç‚¹ï¼Œè€Œä¸é‡æ–°åˆ›å»ºæ–°çš„ dom èŠ‚ç‚¹ï¼Œæé«˜æ¸²æŸ“æ€§èƒ½ã€‚&lt;/div&gt;</span></span><br><span class="line"><span class="string">      &lt;div&gt;æ³¨ï¼šä¸è¦ç”¨ idx ä½œä¸º keyï¼Œå› ä¸ºæ•°ç»„å…ƒç´ çš„é¡ºåºå’Œå…·ä½“å€¼æ²¡æœ‰ä»€ä¹ˆç›´æ¥å…³ç³»ï¼Œ&lt;/div&gt;</span></span><br><span class="line"><span class="string">      &lt;div&gt;ç”¨ idx ä½œä¸º keyï¼Œåœ¨æ•°æ®æºå‘ç”Ÿå¢ã€åˆ ä¹‹åï¼Œå¯èƒ½ä¼šå¯¼è‡´äº§ç”Ÿé”™è¯¯çš„ç¼“å­˜ã€‚&lt;/div&gt;</span></span><br><span class="line"><span class="string">      &lt;ul&gt;</span></span><br><span class="line"><span class="string">        &lt;li v-for="(item, idx) in arr" :key="item"&gt;index: &#123;&#123;idx&#125;&#125;, value: &#123;&#123;item&#125;&#125;&lt;/li&gt;</span></span><br><span class="line"><span class="string">      &lt;/ul&gt;</span></span><br><span class="line"><span class="string">      &lt;ul&gt;</span></span><br><span class="line"><span class="string">        &lt;li v-for="(val, key, idx) in obj"&gt;key: &#123;&#123;key&#125;&#125;, value: &#123;&#123;val&#125;&#125;, index: &#123;&#123;idx&#125;&#125;&lt;/li&gt;</span></span><br><span class="line"><span class="string">      &lt;/ul&gt;</span></span><br><span class="line"><span class="string">      &lt;br/&gt;</span></span><br><span class="line"><span class="string">      &lt;div v-on:click="divClicked"&gt;</span></span><br><span class="line"><span class="string">        &lt;div&gt;v-on åšçš„äº‹æƒ…æ˜¯ï¼š&lt;/div&gt;</span></span><br><span class="line"><span class="string">        &lt;div&gt;å¦‚æœ v-on åŠ åœ¨æ™®é€šçš„ dom èŠ‚ç‚¹å…ƒç´ ä¸Šï¼Œåˆ™ä¼šé€šè¿‡ document.addEventListener ç»™è¯¥èŠ‚ç‚¹å¢åŠ äº‹ä»¶ç›‘å¬&lt;/div&gt;</span></span><br><span class="line"><span class="string">        &lt;div&gt;å¦‚æœ v-on åŠ åœ¨ Vue ç»„ä»¶ä¸Šï¼Œå®é™…ä¸Šæ˜¯åœ¨ Vue å¯¹è±¡å®ä¾‹ä¸Šç»‘å®šä¸€ä¸ªäº‹ä»¶&lt;/div&gt;</span></span><br><span class="line"><span class="string">      &lt;/div&gt;</span></span><br><span class="line"><span class="string">      &lt;br/&gt;</span></span><br><span class="line"><span class="string">      &lt;div&gt;</span></span><br><span class="line"><span class="string">        &lt;input type="text" v-model="text"&gt;</span></span><br><span class="line"><span class="string">        &lt;input type="text" v-model.number="number"&gt;</span></span><br><span class="line"><span class="string">        &lt;input type="text" v-model.trim="text"&gt;</span></span><br><span class="line"><span class="string">        &lt;input type="text" v-model.lazy="text"&gt;</span></span><br><span class="line"><span class="string">        &lt;input type="checkbox" v-model="active"&gt;</span></span><br><span class="line"><span class="string">      &lt;/div&gt;</span></span><br><span class="line"><span class="string">      &lt;br/&gt;</span></span><br><span class="line"><span class="string">      &lt;div&gt;</span></span><br><span class="line"><span class="string">        &lt;div&gt;æ¯ä¸ª checkbox æ‰€ç»‘å®šçš„å€¼æ˜¯å›ºå®šçš„ï¼Œcheckbox çš„ active/inactive å˜åŒ–å:&lt;/div&gt;</span></span><br><span class="line"><span class="string">        &lt;div&gt;active -&gt; inactive: æ•°æ®ç§»é™¤å€¼ä¸ºå½“å‰ checkbox æ‰€ç»‘å®šå€¼çš„å…ƒç´ &lt;/div&gt;</span></span><br><span class="line"><span class="string">        &lt;div&gt;inactive -&gt; active: æ•°æ® push ä¸€ä¸ªå€¼ä¸ºå½“å‰ checkbox æ‰€ç»‘å®šå€¼çš„å…ƒç´ &lt;/div&gt;</span></span><br><span class="line"><span class="string">        &lt;input type="checkbox" value="a" v-model="arr"&gt;</span></span><br><span class="line"><span class="string">        &lt;input type="checkbox" value="b" v-model="arr"&gt;</span></span><br><span class="line"><span class="string">        &lt;input type="checkbox" value="c" v-model="arr"&gt;</span></span><br><span class="line"><span class="string">      &lt;/div&gt;</span></span><br><span class="line"><span class="string">      &lt;br/&gt;</span></span><br><span class="line"><span class="string">      &lt;div&gt;</span></span><br><span class="line"><span class="string">        &lt;input type="radio" value="one" v-model="picked"&gt;</span></span><br><span class="line"><span class="string">        &lt;input type="radio" value="two" v-model="picked"&gt;</span></span><br><span class="line"><span class="string">      &lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">  `</span>,</span><br><span class="line">  data: &#123;</span><br><span class="line">    text: <span class="string">'text'</span>,</span><br><span class="line">    number: <span class="number">0</span>,</span><br><span class="line">    html: <span class="string">'&lt;span&gt;html&lt;/span&gt;'</span>,</span><br><span class="line">    active: <span class="literal">true</span>,</span><br><span class="line">    arr: [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>],</span><br><span class="line">    obj: &#123;</span><br><span class="line">      a: <span class="string">'a'</span>,</span><br><span class="line">      b: <span class="string">'b'</span>,</span><br><span class="line">      c: <span class="string">'c'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    picked: <span class="string">'one'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  watch: &#123;</span><br><span class="line">    text () &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'##### text changed #####'</span>, <span class="keyword">this</span>.text);</span><br><span class="line">    &#125;,</span><br><span class="line">    arr () &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'##### arr changed #####'</span>, <span class="keyword">this</span>.arr);</span><br><span class="line">    &#125;,</span><br><span class="line">    picked () &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'##### arr picked #####'</span>, <span class="keyword">this</span>.picked);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    divClicked () &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'##### divClicked #####'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="6-Vue-ç»„ä»¶"><a href="#6-Vue-ç»„ä»¶" class="headerlink" title="6. Vue ç»„ä»¶"></a>6. Vue ç»„ä»¶</h4><h5 id="6-1-ç»„ä»¶çš„å®šä¹‰"><a href="#6-1-ç»„ä»¶çš„å®šä¹‰" class="headerlink" title="6.1 ç»„ä»¶çš„å®šä¹‰"></a>6.1 ç»„ä»¶çš„å®šä¹‰</h5><ul>
<li>ç»„ä»¶çš„å…¨å±€æ³¨å†Œå’Œå±€éƒ¨æ³¨å†Œ</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> component = &#123;</span><br><span class="line">  template: <span class="string">`&lt;div&gt;This is a component&lt;/div&gt;`</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¨å±€æ³¨å†Œï¼š</span></span><br><span class="line">Vue.component(<span class="string">'CompOne'</span>, component); <span class="comment">// ç»„ä»¶åç§°å‘½åè§„åˆ™ï¼šå¤§é©¼å³°å‘½åæ³•ï¼ˆå› ä¸º component æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ª Vue çš„ classï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å±€éƒ¨æ³¨å†Œ</span></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  component: &#123;<span class="attr">CompOne</span>: component&#125;,</span><br><span class="line">  template: <span class="string">`&lt;comp-one&gt;&lt;/comp-one&gt;`</span> <span class="comment">// ç»„ä»¶ä½¿ç”¨å‘½åè§„åˆ™ï¼šå…¨å°å†™ '-' åˆ†å‰²</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li><p>ç»„ä»¶ <code>data</code> å®šä¹‰ï¼š</p>
<p>ä¸æ˜¯é€šè¿‡ new Vue({<code>options</code>}) åˆ›å»ºçš„ç»„ä»¶ï¼Œ<code>data</code> å¿…é¡»ä»¥ function å½¢å¼è¿”å›ï¼Œå¦åˆ™å½“ä¸€ä¸ªçˆ¶ç»„ä»¶æœ‰å¤šä¸ªç›¸åŒç±»å‹çš„å­ç»„ä»¶æ—¶ï¼Œæ‰€æœ‰çš„å­ç»„ä»¶éƒ½ä¼šå¼•ç”¨åŒä¸€ä»½æ•°æ®æºï¼Œå¹¶ä¸” Vue ä¼šæŠ¥è­¦å‘Šï¼š</p>
</li>
</ul>
<blockquote>
<p>[Vue warn]: The â€œdataâ€ option should be a function that returns a per-instance value in component definitions.</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> component = &#123;</span><br><span class="line">    template: <span class="string">`&lt;div&gt;This is a component&lt;/div&gt;`</span>,</span><br><span class="line">    data () &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        a: <span class="string">'foo'</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li>ç»„ä»¶ <code>props</code> å®šä¹‰ï¼š</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> component = &#123;</span><br><span class="line">    template: <span class="string">`&lt;div @click="handleChange"&gt;This is a component&lt;/div&gt;`</span>,</span><br><span class="line">    props: &#123;</span><br><span class="line">      active: &#123;</span><br><span class="line">        type: <span class="built_in">Boolean</span>, <span class="comment">// ç±»å‹</span></span><br><span class="line">        required: <span class="literal">true</span>, <span class="comment">// æ˜¯å¦å¿…å¡«</span></span><br><span class="line">        <span class="keyword">default</span>: <span class="literal">true</span>, <span class="comment">// é»˜è®¤å€¼</span></span><br><span class="line">        validator (val) &#123; <span class="comment">// è‡ªå®šä¹‰æ ¡éªŒ</span></span><br><span class="line">          <span class="keyword">return</span> <span class="keyword">typeof</span> val === <span class="string">'boolean'</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      propOne: <span class="built_in">Number</span>, <span class="comment">// å±æ€§å‘½åè§„åˆ™ï¼šå°é©¼å³°å‘½åæ³•</span></span><br><span class="line">      <span class="comment">// å¦‚æœæ˜¯å¯¹è±¡ï¼Œåˆ™å¿…é¡»ä»¥ function å½¢å¼è¿”å›ä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">      <span class="comment">// åŸå› å’Œä¸æ˜¯é€šè¿‡ new Vue() åˆ›å»ºçš„ç»„ä»¶ï¼Œdata å¿…é¡»ä»¥ function å½¢å¼è¿”å›ä¸€æ ·</span></span><br><span class="line">      <span class="comment">// å³å½“ä¸¤ä¸ªç›¸åŒç±»å‹çš„å­ç»„ä»¶çš„ä¸€ä¸ªå¯¹è±¡ props å¼•ç”¨äº†çˆ¶ç»„ä»¶çš„åŒä¸€ä¸ªå€¼ï¼Œé‚£ä¹ˆå°±ä¼šç›¸äº’å½±å“</span></span><br><span class="line">      obj () &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">          <span class="keyword">default</span>: &#123;<span class="attr">a</span>: <span class="string">'foo'</span>&#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// ä¹Ÿå¯ä»¥é€šè¿‡æ•°ç»„å®šä¹‰ propsï¼Œä½†ç›¸å¯¹ä¸ä¸¥è°¨</span></span><br><span class="line">    <span class="comment">// props: ['active', 'propOne'],</span></span><br><span class="line">    <span class="comment">// mounted () &#123;</span></span><br><span class="line">    <span class="comment">//   this.propOne = 1;</span></span><br><span class="line">    <span class="comment">// &#125;,</span></span><br><span class="line">    methods: &#123;</span><br><span class="line">      handleChange () &#123;</span><br><span class="line">        <span class="keyword">this</span>.$emit(<span class="string">'change'</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure>

<p> Vue ä¸æ¨èåœ¨å­ç»„ä»¶ä¸­æ›´æ”¹ <code>props</code> çš„å€¼ï¼Œå¦‚æœç›´æ¥æ›´æ”¹ï¼Œä¼šæŠ¥è­¦å‘Šï¼š</p>
<blockquote>
<p>[Vue warn]: Avoid mutating a prop directly since the value will be overwritten whenever the parent component re-renders. Instead, use a data or computed property based on the propâ€™s value. Prop being mutated: â€œpropOneâ€</p>
</blockquote>
<p> å¦‚æœè¦æ›´æ”¹ï¼Œå¯ä»¥é€šè¿‡å­ç»„ä»¶ <code>$emit</code> äº‹ä»¶ï¼Œå›è°ƒåˆ°çˆ¶ç»„ä»¶è¿›è¡Œæ›´æ”¹</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#root'</span>,</span><br><span class="line">  components: &#123;</span><br><span class="line">    Comp: component</span><br><span class="line">  &#125;,</span><br><span class="line">  template: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div&gt;</span></span><br><span class="line"><span class="string">      // ä¼ é€’ props æ—¶ï¼Œä½¿ç”¨å…¨å°å†™ '-' åˆ†å‰²</span></span><br><span class="line"><span class="string">      &lt;comp :active="true" :prop-one="propA" @change="handleChange"&gt;&lt;/comp&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">  `</span>,</span><br><span class="line">  data: &#123;</span><br><span class="line">    propA: <span class="number">1</span></span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    handleChange () &#123;</span><br><span class="line">      <span class="keyword">this</span>.propA += <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h5 id="6-2-ç»„ä»¶çš„ç»§æ‰¿"><a href="#6-2-ç»„ä»¶çš„ç»§æ‰¿" class="headerlink" title="6.2 ç»„ä»¶çš„ç»§æ‰¿"></a>6.2 ç»„ä»¶çš„ç»§æ‰¿</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> component = &#123;</span><br><span class="line">  template: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div&gt;</span></span><br><span class="line"><span class="string">      &lt;input type="text" v-model="text"&gt;</span></span><br><span class="line"><span class="string">      &lt;span v-show="active"&gt;show if active&lt;/span&gt;</span></span><br><span class="line"><span class="string">      &lt;span @click="handleChange"&gt;&#123;&#123;propOne&#125;&#125;&lt;/span&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">  `</span>,</span><br><span class="line">  props: &#123;</span><br><span class="line">    active: <span class="built_in">Boolean</span>,</span><br><span class="line">    propOne: <span class="built_in">String</span></span><br><span class="line">  &#125;,</span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      text: <span class="number">0</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted () &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'##### component mounted #####'</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    handleChange () &#123;</span><br><span class="line">      <span class="keyword">this</span>.$emit(<span class="string">'change'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Š component é…ç½®åªæ˜¯ä¸€ä¸ªæ™®é€šçš„ objectï¼Œå¦‚ä½•è®©é…ç½®ç”Ÿæˆ Vue å¯¹è±¡ï¼Œé™¤äº†é€šè¿‡ new Vue(<code>{component: {Comp: component}}</code>) ä»¥å¤–ï¼Œè¿˜å¯ä»¥å¯¹ Vue è¿›è¡Œç»§æ‰¿ï¼Œç”Ÿæˆ Vue å¯¹è±¡ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> CompVue = Vue.extend(component);</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> CompVue(&#123;</span><br><span class="line">  el: <span class="string">'#root'</span>,</span><br><span class="line">  <span class="comment">// é€šè¿‡ props æ— æ³•å°†å¤–éƒ¨å±æ€§ä¼ å…¥</span></span><br><span class="line">  <span class="comment">// props: &#123;</span></span><br><span class="line">  <span class="comment">//   propOne: 'props 1'</span></span><br><span class="line">  <span class="comment">// &#125;,</span></span><br><span class="line">  <span class="comment">// éœ€è¦é€šè¿‡ propsData ä¼ å…¥</span></span><br><span class="line">  propsData: &#123;</span><br><span class="line">    propOne: <span class="string">'propsData 1'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// å¯ä»¥ä¼ å…¥ data ä¸ CompVue é»˜è®¤çš„ data åˆå¹¶è¦†ç›–</span></span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      text: <span class="number">3</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// ç”Ÿå‘½å‘¨æœŸæ–¹æ³•æ‰§è¡Œé¡ºåºï¼šå…ˆæ‰§è¡Œ CompVue é»˜è®¤é…ç½®ä¸­çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œå†æ‰§è¡Œ CompVue å®ä¾‹ä¸­çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•</span></span><br><span class="line">  mounted () &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'##### instance mounted #####'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>CompVue æ˜¯ Vue çš„ä¸€ä¸ªå­ç±»ï¼Œé€šè¿‡ new Vue(options) åˆå§‹åŒ–è€Œæ¥ Vue å¯¹è±¡ï¼Œæ˜¯é»˜è®¤å†…ç½®é…ç½®ä¸‹ç”Ÿæˆçš„ï¼Œæ²¡æœ‰ dataã€props ç­‰ç›¸å…³é…ç½®ï¼Œé€šè¿‡ new CompVue() ç”Ÿæˆçš„ Vue å¯¹è±¡ä¼šé»˜è®¤å¸¦æœ‰ dataã€propsã€methods é…ç½®</p>
<p>ä¹Ÿå¯ä»¥é€šè¿‡ä»¥ä¸‹è¿™ç§æ–¹å¼å®ç°å¯¹ component çš„ç»§æ‰¿ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> component2 = &#123;</span><br><span class="line">  extends: component,</span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      text: <span class="number">1</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted () &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'##### instance mounted #####'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#root'</span>,</span><br><span class="line">  components: &#123;</span><br><span class="line">    Comp: component2</span><br><span class="line">  &#125;,</span><br><span class="line">  template: <span class="string">`&lt;comp prop-one="123"&gt;&lt;/comp&gt;`</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šå½“æˆ‘ä»¬å¼€å‘å¥½ä¸€ä¸ªç»„ä»¶ï¼Œå¯èƒ½æ¯”è¾ƒå…¬ç”¨ï¼Œå¾ˆå¤šé¡¹ç›®éƒ½ä¼šç”¨åˆ°ï¼Œè€Œä¸”åŠŸèƒ½æè¿°æ¯”è¾ƒæ³›ï¼Œä½¿ç”¨èµ·æ¥éœ€è¦ä¼ å…¥å¾ˆå¤šçš„é…ç½®é¡¹ï¼Œè€Œåœ¨æŸä¸ªå…·ä½“é¡¹ç›®ä¸­ï¼Œå¾ˆå¤šå‚æ•°éƒ½ä½¿ç”¨å®ƒçš„é»˜è®¤å€¼ï¼Œä¸éœ€è¦ä¼ å…¥ï¼Œæˆ–è€…éœ€è¦åœ¨åŸæœ‰åŸºç¡€ä¸Šæ‰©å±•ä¸€äº›ç‰¹å®šçš„å±æ€§ï¼Œè¿™æ—¶å€™å°±å¯ä»¥é€šè¿‡ extend çš„æ–¹å¼ï¼Œåœ¨åŸæœ‰ç»„ä»¶åŸºç¡€ä¸Šï¼Œç»§æ‰¿æ‰©å±•å‡ºæˆ‘ä»¬éœ€è¦çš„ç»„ä»¶ï¼Œè€Œä¸éœ€è¦ä»å¤´å¼€å§‹å†™ä¸€ä¸ªæ–°çš„ç»„ä»¶</p>
<h5 id="6-3-ç»„ä»¶è‡ªå®šä¹‰ç»‘å®š"><a href="#6-3-ç»„ä»¶è‡ªå®šä¹‰ç»‘å®š" class="headerlink" title="6.3 ç»„ä»¶è‡ªå®šä¹‰ç»‘å®š"></a>6.3 ç»„ä»¶è‡ªå®šä¹‰ç»‘å®š</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€šè¿‡ v-model å®ç°çˆ¶å­ç»„ä»¶çš„åŒå‘ç»‘å®š</span></span><br><span class="line"><span class="keyword">const</span> component = &#123;</span><br><span class="line">  template: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div&gt;</span></span><br><span class="line"><span class="string">      &lt;input type="text" :value="value1" @input="handleInput"&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">  `</span>,</span><br><span class="line">  model: &#123;</span><br><span class="line">    prop: <span class="string">'value1'</span>, <span class="comment">// æŒ‡å®šåŒå‘ç»‘å®š prop çš„ key</span></span><br><span class="line">    event: <span class="string">'change'</span> <span class="comment">// æŒ‡å®šå›è°ƒæ—¶é—´çš„æ–¹æ³•å</span></span><br><span class="line">  &#125;,</span><br><span class="line">  props: [<span class="string">'value'</span>, <span class="string">'value1'</span>],</span><br><span class="line">  methods: &#123;</span><br><span class="line">    handleInput (event) &#123;</span><br><span class="line">      <span class="comment">// this.$emit('input', event.target.value);</span></span><br><span class="line">      <span class="keyword">this</span>.$emit(<span class="string">'change'</span>, event.target.value);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#root'</span>,</span><br><span class="line">  components: &#123;</span><br><span class="line">    Comp: component</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// template: `&lt;comp :value="value" @input="value = arguments[0]"&gt;&lt;/comp&gt;`,</span></span><br><span class="line">  template: <span class="string">`&lt;comp v-model="value"&gt;&lt;/comp&gt;`</span>,</span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      value: <span class="string">'123'</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h5 id="6-4-ç»„ä»¶é«˜çº§å±æ€§"><a href="#6-4-ç»„ä»¶é«˜çº§å±æ€§" class="headerlink" title="6.4 ç»„ä»¶é«˜çº§å±æ€§"></a>6.4 ç»„ä»¶é«˜çº§å±æ€§</h5><ul>
<li><strong>slot å’Œ slot-scope</strong></li>
</ul>
<p>åœ¨å­ç»„ä»¶ä¸­å¯ä»¥é€šè¿‡æŒ‡å®šä¸åŒæ’æ§½åï¼Œå®šä¹‰å¤šä¸ªæ’æ§½ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> component = &#123;</span><br><span class="line">  template: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div :style="style"&gt;</span></span><br><span class="line"><span class="string">      &lt;div class="header"&gt;</span></span><br><span class="line"><span class="string">        &lt;slot name="header"&gt;&lt;/slot&gt;</span></span><br><span class="line"><span class="string">      &lt;/div&gt;</span></span><br><span class="line"><span class="string">      &lt;div class="body"&gt;</span></span><br><span class="line"><span class="string">        &lt;slot name="body"&gt;&lt;/slot&gt;</span></span><br><span class="line"><span class="string">      &lt;/div&gt;</span></span><br><span class="line"><span class="string">      &lt;div class="footer"&gt;</span></span><br><span class="line"><span class="string">        &lt;slot name="footer"&gt;&lt;/slot&gt;</span></span><br><span class="line"><span class="string">      &lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">  `</span>,</span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      style: &#123;</span><br><span class="line">        width: <span class="string">'200px'</span>,</span><br><span class="line">        height: <span class="string">'200px'</span>,</span><br><span class="line">        border: <span class="string">'1px solid #aaa'</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>åœ¨çˆ¶ç»„ä»¶ä¸­æ ¹æ®æ’æ§½åä¼ å…¥ä¸åŒçš„æ’æ§½ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    el: <span class="string">'#root'</span>,</span><br><span class="line">    components: &#123;</span><br><span class="line">      CompOne: component</span><br><span class="line">    &#125;,</span><br><span class="line">    template: <span class="string">`</span></span><br><span class="line"><span class="string">      &lt;div&gt;</span></span><br><span class="line"><span class="string">        &lt;comp-one&gt;</span></span><br><span class="line"><span class="string">          &lt;div slot="header"&gt;slot header&lt;/div&gt;</span></span><br><span class="line"><span class="string">          &lt;div slot="body"&gt;slot body&lt;/div&gt;</span></span><br><span class="line"><span class="string">          &lt;div slot="footer"&gt;slot footer&lt;/div&gt;</span></span><br><span class="line"><span class="string">        &lt;/comp-one&gt;</span></span><br><span class="line"><span class="string">      &lt;/div&gt;</span></span><br><span class="line"><span class="string">    `</span></span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<p>å¸¦ä½œç”¨åŸŸçš„æ’æ§½ï¼šåœ¨å­ç»„ä»¶æ’æ§½ä¸­å®šä¹‰å†…éƒ¨å±æ€§ï¼Œçˆ¶ç»„ä»¶é€šè¿‡ <code>slot-scop</code> å¯ä»¥è®¿é—®åˆ°å­ç»„ä»¶çš„å±æ€§ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> component = &#123;</span><br><span class="line">  template: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div :style="style"&gt;</span></span><br><span class="line"><span class="string">      &lt;slot :slotValue1="slotProp" :slotValue2="slotData"&gt;&lt;/slot&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">  `</span>,</span><br><span class="line">  props: &#123;</span><br><span class="line">    slotProp: <span class="built_in">String</span></span><br><span class="line">  &#125;,</span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      style: &#123;</span><br><span class="line">        width: <span class="string">'200px'</span>,</span><br><span class="line">        height: <span class="string">'200px'</span>,</span><br><span class="line">        border: <span class="string">'1px solid #aaa'</span></span><br><span class="line">      &#125;,</span><br><span class="line">      slotData: <span class="string">'abc'</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡æŒ‡å®š â€œpropsâ€ ä½œä¸º keyï¼Œå°†æ’æ§½ä¸­çš„å±æ€§åŒ…è£…æˆ objectï¼Œè¿™æ ·çˆ¶ç»„ä»¶å°±å¯ä»¥é€šè¿‡ props[key] æ¥è®¿é—®æ’æ§½ä¸­çš„å±æ€§</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#root'</span>,</span><br><span class="line">  components: &#123;</span><br><span class="line">    CompOne: component</span><br><span class="line">  &#125;,</span><br><span class="line">  template: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div&gt;</span></span><br><span class="line"><span class="string">      &lt;comp-one :slot-prop="value1"&gt;</span></span><br><span class="line"><span class="string">        &lt;div slot-scope="props"&gt;</span></span><br><span class="line"><span class="string">          &lt;div&gt;slotValue1: &#123;&#123;props.slotValue1&#125;&#125;&lt;/div&gt;</span></span><br><span class="line"><span class="string">          &lt;div&gt;slotValue2: &#123;&#123;props.slotValue2&#125;&#125;&lt;/div&gt;</span></span><br><span class="line"><span class="string">          &lt;div&gt;selfValue: &#123;&#123;value2&#125;&#125;&lt;/div&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;</span></span><br><span class="line"><span class="string">      &lt;/comp-one&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">  `</span>,</span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      value1: <span class="string">'def'</span>,</span><br><span class="line">      value2: <span class="string">'ijk'</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>provide å’Œ inject</strong></li>
</ul>
<p>å¯¹äºè·¨å¤šçº§çš„ç»„ä»¶ä¸­ï¼Œçˆ¶ç»„ä»¶å’Œå­ç»„ä»¶çš„å‚æ•°ä¼ é€’ï¼Œå¯ä»¥é€šè¿‡åœ¨çˆ¶ç»„ä»¶ä¸­å®šä¹‰ <code>provide</code>ï¼Œå­ç»„ä»¶ä¸­å®šä¹‰ <code>inject</code> æ¥å®ç°</p>
<p>å­™ç»„ä»¶ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> GrandsonComponent = &#123;</span><br><span class="line">  template: <span class="string">'&lt;div&gt;child component&lt;/div&gt;'</span>,</span><br><span class="line">  inject: [<span class="string">'const'</span>, <span class="string">'grandparent'</span>, <span class="string">'value'</span>],</span><br><span class="line">  mounted () &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'##### const #####'</span>, <span class="keyword">this</span>.const); <span class="comment">// xyz</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'##### grandparent #####'</span>, <span class="keyword">this</span>.grandparent); <span class="comment">// undefined</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'##### value #####'</span>, <span class="keyword">this</span>.value); <span class="comment">// åœ¨çˆ¶ç»„ä»¶ä¸­æŠ¥é”™</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>å­ç»„ä»¶ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ChildComponent = &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    GrandsonComponent</span><br><span class="line">  &#125;,</span><br><span class="line">  template: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;grandson-component&gt;&lt;/grandson-component&gt;</span></span><br><span class="line"><span class="string">  `</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>çˆ¶ç»„ä»¶ï¼š</p>
<p>é€šè¿‡ <code>provide: {}</code> çš„æ–¹å¼å®šä¹‰ <code>provide</code>ï¼Œåœ¨å­å­™ç»„ä»¶ä¸­æ˜¯æ‹¿ä¸åˆ°çˆ¶ç»„ä»¶çš„ <code>this</code> çš„ï¼Œåªèƒ½æ¥æ”¶åˆ°ä¼ å…¥çš„å¸¸é‡ï¼Œå› ä¸ºè¿™æ ·åˆå§‹åŒ– <code>provide</code> å¯¹è±¡ï¼Œå…¶å® Vue æœ¬èº«è¿˜æ²¡æœ‰åˆå§‹åŒ–å®Œæˆï¼Œæ‰€æœ‰è®¿é—®ä¸äº† <code>this</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#root'</span>,</span><br><span class="line">  components: &#123;</span><br><span class="line">    ChildComponent</span><br><span class="line">  &#125;,</span><br><span class="line">  provide: &#123;</span><br><span class="line">    <span class="keyword">const</span>: <span class="string">'xyz'</span>,</span><br><span class="line">    grandparent: <span class="keyword">this</span>,</span><br><span class="line">    value: <span class="keyword">this</span>.value <span class="comment">// æŠ¥é”™</span></span><br><span class="line">  &#125;,</span><br><span class="line">  template: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;child-component&gt;&lt;/child-component&gt;</span></span><br><span class="line"><span class="string">  `</span>,</span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      value: <span class="string">'abc'</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<hr>
<p>å­™ç»„ä»¶ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> GrandsonComponent = &#123;</span><br><span class="line">  template: <span class="string">'&lt;div&gt;child component: &#123;&#123;value&#125;&#125;&lt;/div&gt;'</span>,</span><br><span class="line">  inject: [<span class="string">'const'</span>, <span class="string">'grandparent'</span>, <span class="string">'value'</span>],</span><br><span class="line">  mounted () &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'##### const #####'</span>, <span class="keyword">this</span>.const); <span class="comment">// xyz</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'##### grandparent #####'</span>, <span class="keyword">this</span>.grandparent); <span class="comment">// çˆ¶ç»„ä»¶ Vue å®ä¾‹</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'##### value #####'</span>, <span class="keyword">this</span>.value); <span class="comment">// abc</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>çˆ¶ç»„ä»¶ï¼š</p>
<p>é€šè¿‡æ–¹æ³•è¿”å›å®šä¹‰ <code>provide</code>ï¼Œæ‰å­å­™ç»„ä»¶ä¸­æ¥æ”¶åˆ°çˆ¶ç»„ä»¶çš„ <code>this</code>ï¼Œä½†æ˜¯çˆ¶ç»„ä»¶ä¸­çš„å“åº”å¼å˜é‡ï¼Œä¸ä¼šåœ¨å­å­™ç»„ä»¶ä¸­å“åº”å¼åœ°å˜åŒ–</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#root'</span>,</span><br><span class="line">  components: &#123;</span><br><span class="line">    ChildComponent</span><br><span class="line">  &#125;,</span><br><span class="line">  provide () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="keyword">const</span>: <span class="string">'xyz'</span>,</span><br><span class="line">      grandparent: <span class="keyword">this</span>,</span><br><span class="line">      value: <span class="keyword">this</span>.value</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  template: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;child-component&gt;&lt;/child-component&gt;</span></span><br><span class="line"><span class="string">  `</span>,</span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      value: <span class="string">'abc'</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<hr>
<p>å­™ç»„ä»¶ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> GrandsonComponent = &#123;</span><br><span class="line">  template: <span class="string">'&lt;div&gt;child component: &#123;&#123;value&#125;&#125;&lt;/div&gt;'</span>,</span><br><span class="line">  inject: [<span class="string">'const'</span>, <span class="string">'grandparent'</span>, <span class="string">'data'</span>],</span><br><span class="line">  mounted () &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'##### const #####'</span>, <span class="keyword">this</span>.const); <span class="comment">// xyz</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'##### grandparent #####'</span>, <span class="keyword">this</span>.grandparent); <span class="comment">// çˆ¶ç»„ä»¶ Vue å®ä¾‹</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'##### value #####'</span>, <span class="keyword">this</span>.data); <span class="comment">// &#123;value: çˆ¶ç»„ä»¶çš„ value&#125;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>çˆ¶ç»„ä»¶ï¼š</p>
<p>åªæœ‰åœ¨ <code>provide</code> ä¸­é‡å®šä¹‰ <code>get()</code> æ–¹æ³•ï¼Œè®©å­å­™ç»„ä»¶æ¯æ¬¡è·å–åˆ°çš„ value éƒ½æ˜¯å…¶æœ€æ–°å€¼ï¼Œä»è€Œå®ç°å“åº”å¼ã€‚è¿™ä¹Ÿæ˜¯ Vue å®ç°å“åº”å¼çš„æœ€åŸºæœ¬åŸç†</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#root'</span>,</span><br><span class="line">  components: &#123;</span><br><span class="line">    ChildComponent</span><br><span class="line">  &#125;,</span><br><span class="line">  provide () &#123;</span><br><span class="line">    <span class="keyword">const</span> data = &#123;&#125;;</span><br><span class="line">    <span class="built_in">Object</span>.defineProperty(data, <span class="string">'value'</span>, &#123;</span><br><span class="line">      <span class="keyword">get</span>: () =&gt; this.value,</span><br><span class="line">      enumerable: true</span><br><span class="line">    &#125;);</span><br><span class="line">    return &#123;</span><br><span class="line">      <span class="keyword">const</span>: <span class="string">'xyz'</span>,</span><br><span class="line">      grandparent: <span class="keyword">this</span>,</span><br><span class="line">      data</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  template: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;child-component&gt;&lt;/child-component&gt;</span></span><br><span class="line"><span class="string">    &lt;input type="text" v-model="value"/&gt;</span></span><br><span class="line"><span class="string">  `</span>,</span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      value: <span class="string">'abc'</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>


<h5 id="6-5-ç»„ä»¶-render-function"><a href="#6-5-ç»„ä»¶-render-function" class="headerlink" title="6.5 ç»„ä»¶ render function"></a>6.5 ç»„ä»¶ render function</h5></section>
    <!-- Tags START -->
    
      <div class="tags">
        <span>Tags:</span>
        
  <a href="/tags#Vue" >
    <span class="tag-code">Vue</span>
  </a>

      </div>
    
    <!-- Tags END -->
    <!-- NAV START -->
    
  <div class="nav-container">
    <!-- reverse left and right to put prev and next in a more logic postition -->
    
      <a class="nav-left" href="/2020/02/10/tech/vue/vue-eslint/">
        <span class="nav-arrow">â† </span>
        
          Vue é…ç½® ESLint è§„åˆ™
        
      </a>
    
    
      <a class="nav-right" href="/2020/03/06/thinking/20200125/">
        
          æ˜¥èŠ‚éšæƒ³
        
        <span class="nav-arrow"> â†’</span>
      </a>
    
  </div>

    <!-- NAV END -->
    <!-- æ‰“èµ START -->
    
    <!-- æ‰“èµ END -->
    <!-- äºŒç»´ç  START -->
    
    <!-- äºŒç»´ç  END -->
    
      <!-- No Comment -->
    
  </article>
  <!-- Article END -->
  <!-- Catalog START -->
  
    <aside class="catalog-container">
  <div class="toc-main">
    <strong class="toc-title">Catalog</strong>
    
      <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#1-Vue-å®ä¾‹"><span class="toc-nav-text">1. Vue å®ä¾‹</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#4-computed-å’Œ-watch"><span class="toc-nav-text">4. computed å’Œ watch</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#5-Vue-çš„åŸç”ŸæŒ‡ä»¤"><span class="toc-nav-text">5. Vue çš„åŸç”ŸæŒ‡ä»¤</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#6-Vue-ç»„ä»¶"><span class="toc-nav-text">6. Vue ç»„ä»¶</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#6-1-ç»„ä»¶çš„å®šä¹‰"><span class="toc-nav-text">6.1 ç»„ä»¶çš„å®šä¹‰</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#6-2-ç»„ä»¶çš„ç»§æ‰¿"><span class="toc-nav-text">6.2 ç»„ä»¶çš„ç»§æ‰¿</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#6-3-ç»„ä»¶è‡ªå®šä¹‰ç»‘å®š"><span class="toc-nav-text">6.3 ç»„ä»¶è‡ªå®šä¹‰ç»‘å®š</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#6-4-ç»„ä»¶é«˜çº§å±æ€§"><span class="toc-nav-text">6.4 ç»„ä»¶é«˜çº§å±æ€§</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#6-5-ç»„ä»¶-render-function"><span class="toc-nav-text">6.5 ç»„ä»¶ render function</span></a></li></ol></li></ol>
    
  </div>
</aside>
  
  <!-- Catalog END -->
</main>

<script>
  (function () {
    var url = 'http://yoursite.com/2020/03/05/tech/vue/vue-core-api/';
    var banner = ''
    if (banner !== '' && banner !== 'undefined' && banner !== 'null') {
      $('#article-banner').css({
        'background-image': 'url(' + banner + ')'
      })
    } else {
      $('#article-banner').geopattern(url)
    }
    $('.header').removeClass('fixed-header')

    // error image
    $(".markdown-content img").on('error', function() {
      $(this).attr('src', 'http://file.muyutech.com/error-img.png')
      $(this).css({
        'cursor': 'default'
      })
    })

    // zoom image
    $(".markdown-content img").on('click', function() {
      var src = $(this).attr('src')
      if (src !== 'http://file.muyutech.com/error-img.png') {
        var imageW = $(this).width()
        var imageH = $(this).height()

        var zoom = ($(window).width() * 0.95 / imageW).toFixed(2)
        zoom = zoom < 1 ? 1 : zoom
        zoom = zoom > 2 ? 2 : zoom
        var transY = (($(window).height() - imageH) / 2).toFixed(2)

        $('body').append('<div class="image-view-wrap"><div class="image-view-inner"><img src="'+ src +'" /></div></div>')
        $('.image-view-wrap').addClass('wrap-active')
        $('.image-view-wrap img').css({
          'width': `${imageW}`,
          'transform': `translate3d(0, ${transY}px, 0) scale3d(${zoom}, ${zoom}, 1)`
        })
        $('html').css('overflow', 'hidden')

        $('.image-view-wrap').on('click', function() {
          $(this).remove()
          $('html').attr('style', '')
        })
      }
    })
  })();
</script>







    <div class="scroll-top">
  <span class="arrow-icon"></span>
</div>
    <footer class="app-footer">
  <p class="copyright">
    &copy; 2020 | Proudly powered by <a href="https://hexo.io" target="_blank">Hexo</a>
    <br>
    Theme by <a href="https://github.com/yanm1ng" target="_blank" rel="noopener">yanm1ng</a>
  </p>
</footer>

<script>
  function async(u, c) {
    var d = document, t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
    s.parentNode.insertBefore(o, s);
  }
</script>
<script>
  async("//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js", function(){
    FastClick.attach(document.body);
  })
</script>

<script>
  var hasLine = 'true';
  async("//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js", function(){
    $('figure pre').each(function(i, block) {
      var figure = $(this).parents('figure');
      if (hasLine === 'false') {
        figure.find('.gutter').hide();
      }
      var lang = figure.attr('class').split(' ')[1] || 'code';
      var codeHtml = $(this).html();
      var codeTag = document.createElement('code');
      codeTag.className = lang;
      codeTag.innerHTML = codeHtml;
      $(this).attr('class', '').empty().html(codeTag);
      figure.attr('data-lang', lang.toUpperCase());
      hljs.highlightBlock(block);
    });
  })
</script>
<!-- Baidu Tongji -->


<script src="/js/script.js"></script>

  </body>
</html>